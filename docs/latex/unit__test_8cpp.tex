\hypertarget{unit__test_8cpp}{}\doxysection{src/unit\+\_\+test.cpp File Reference}
\label{unit__test_8cpp}\index{src/unit\_test.cpp@{src/unit\_test.cpp}}


Обеспечивает тестирование программы для проверки корректности работы  


{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include $<$TXLib.\+h$>$}\newline
{\ttfamily \#include \char`\"{}square\+\_\+equation\+\_\+struct.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}solver.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}unit\+\_\+test.\+h\char`\"{}}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structexpected__eq}{expected\+\_\+eq}}
\begin{DoxyCompactList}\small\item\em Объявление структры для проверки работы основной программы \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static int \mbox{\hyperlink{unit__test_8cpp_aeffbfb94b1fd8ab580de8c988b6f870b}{is\+\_\+double\+\_\+num\+\_\+equal}} (double num1, double num2)
\begin{DoxyCompactList}\small\item\em Вспомогательная функция для сравнивания чисел типа double. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{unit__test_8cpp_ad8838576751520ee44f3180e0bc32fde}{test\+\_\+iteration}} (int test\+\_\+num, \mbox{\hyperlink{structexpected__eq}{expected\+\_\+eq}} $\ast$ptr\+\_\+ex\+\_\+eq)
\begin{DoxyCompactList}\small\item\em Сравнивает результат работы программы с ожидаемым результом и при несоответствии выводит ошибку \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{unit__test_8cpp_a19e8d21242de8be1599a2bcd44e4fbd5}{change\+\_\+root\+\_\+to\+\_\+zero}} (\mbox{\hyperlink{structexpected__eq}{expected\+\_\+eq}} $\ast$ptr\+\_\+ex\+\_\+eq)
\begin{DoxyCompactList}\small\item\em Сбрасывает значения корней на стандартные для корректной работы программы \end{DoxyCompactList}\item 
static int \mbox{\hyperlink{unit__test_8cpp_a948a7cc54fd7d17daf16879a15fb089e}{compare\+\_\+correct\+\_\+and\+\_\+test\+\_\+roots}} (\mbox{\hyperlink{structexpected__eq}{expected\+\_\+eq}} $\ast$peq)
\begin{DoxyCompactList}\small\item\em Сравнивание чисел типа double. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unit__test_8cpp_ace1c481b39dab262c935d9a6e9855203}{unit\+\_\+test\+\_\+start}} (void)
\begin{DoxyCompactList}\small\item\em Запускает модуль тестирования \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Обеспечивает тестирование программы для проверки корректности работы 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{unit__test_8cpp_a19e8d21242de8be1599a2bcd44e4fbd5}\label{unit__test_8cpp_a19e8d21242de8be1599a2bcd44e4fbd5}} 
\index{unit\_test.cpp@{unit\_test.cpp}!change\_root\_to\_zero@{change\_root\_to\_zero}}
\index{change\_root\_to\_zero@{change\_root\_to\_zero}!unit\_test.cpp@{unit\_test.cpp}}
\doxysubsubsection{\texorpdfstring{change\_root\_to\_zero()}{change\_root\_to\_zero()}}
{\footnotesize\ttfamily static void change\+\_\+root\+\_\+to\+\_\+zero (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structexpected__eq}{expected\+\_\+eq}} $\ast$}]{ptr\+\_\+ex\+\_\+eq }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Сбрасывает значения корней на стандартные для корректной работы программы 



Definition at line 98 of file unit\+\_\+test.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{98                                                         \{}
\DoxyCodeLine{99 }
\DoxyCodeLine{100     assert(ptr\_ex\_eq != NULL);}
\DoxyCodeLine{101 }
\DoxyCodeLine{102     ptr\_ex\_eq-\/>\mbox{\hyperlink{structexpected__eq_a7f76d73438937c34157f649c5817aebc}{test\_eq}}.rts.x1     = 0;}
\DoxyCodeLine{103     ptr\_ex\_eq-\/>\mbox{\hyperlink{structexpected__eq_a7f76d73438937c34157f649c5817aebc}{test\_eq}}.rts.x2     = 0;}
\DoxyCodeLine{104 }
\DoxyCodeLine{105 \}}

\end{DoxyCode}


References expected\+\_\+eq\+::test\+\_\+eq.



Referenced by unit\+\_\+test\+\_\+start().

\mbox{\Hypertarget{unit__test_8cpp_a948a7cc54fd7d17daf16879a15fb089e}\label{unit__test_8cpp_a948a7cc54fd7d17daf16879a15fb089e}} 
\index{unit\_test.cpp@{unit\_test.cpp}!compare\_correct\_and\_test\_roots@{compare\_correct\_and\_test\_roots}}
\index{compare\_correct\_and\_test\_roots@{compare\_correct\_and\_test\_roots}!unit\_test.cpp@{unit\_test.cpp}}
\doxysubsubsection{\texorpdfstring{compare\_correct\_and\_test\_roots()}{compare\_correct\_and\_test\_roots()}}
{\footnotesize\ttfamily static int compare\+\_\+correct\+\_\+and\+\_\+test\+\_\+roots (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structexpected__eq}{expected\+\_\+eq}} $\ast$}]{peq }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Сравнивание чисел типа double. 



Definition at line 108 of file unit\+\_\+test.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{108                                                              \{}
\DoxyCodeLine{109     \textcolor{keywordflow}{return} (\mbox{\hyperlink{unit__test_8cpp_aeffbfb94b1fd8ab580de8c988b6f870b}{is\_double\_num\_equal}}(peq-\/>\mbox{\hyperlink{structexpected__eq_a7f76d73438937c34157f649c5817aebc}{test\_eq}}.rts.x1, peq-\/>\mbox{\hyperlink{structexpected__eq_a15459797c2ccdd19d372b6f94dafd8f6}{correct\_roots}}.x1) \&\&}
\DoxyCodeLine{110             \mbox{\hyperlink{unit__test_8cpp_aeffbfb94b1fd8ab580de8c988b6f870b}{is\_double\_num\_equal}}(peq-\/>\mbox{\hyperlink{structexpected__eq_a7f76d73438937c34157f649c5817aebc}{test\_eq}}.rts.x2, peq-\/>\mbox{\hyperlink{structexpected__eq_a15459797c2ccdd19d372b6f94dafd8f6}{correct\_roots}}.x2));}
\DoxyCodeLine{111 }
\DoxyCodeLine{112 \}}

\end{DoxyCode}


References expected\+\_\+eq\+::correct\+\_\+roots, is\+\_\+double\+\_\+num\+\_\+equal(), and expected\+\_\+eq\+::test\+\_\+eq.



Referenced by test\+\_\+iteration().

\mbox{\Hypertarget{unit__test_8cpp_aeffbfb94b1fd8ab580de8c988b6f870b}\label{unit__test_8cpp_aeffbfb94b1fd8ab580de8c988b6f870b}} 
\index{unit\_test.cpp@{unit\_test.cpp}!is\_double\_num\_equal@{is\_double\_num\_equal}}
\index{is\_double\_num\_equal@{is\_double\_num\_equal}!unit\_test.cpp@{unit\_test.cpp}}
\doxysubsubsection{\texorpdfstring{is\_double\_num\_equal()}{is\_double\_num\_equal()}}
{\footnotesize\ttfamily static int is\+\_\+double\+\_\+num\+\_\+equal (\begin{DoxyParamCaption}\item[{double}]{num1,  }\item[{double}]{num2 }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Вспомогательная функция для сравнивания чисел типа double. 



Definition at line 114 of file unit\+\_\+test.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{114                                                         \{}
\DoxyCodeLine{115     \textcolor{keyword}{const} \textcolor{keywordtype}{double} accuracy = 0.01;}
\DoxyCodeLine{116     \textcolor{keywordflow}{return} (fabs(num1 -\/ num2) < accuracy);}
\DoxyCodeLine{117 \}}

\end{DoxyCode}


Referenced by compare\+\_\+correct\+\_\+and\+\_\+test\+\_\+roots().

\mbox{\Hypertarget{unit__test_8cpp_ad8838576751520ee44f3180e0bc32fde}\label{unit__test_8cpp_ad8838576751520ee44f3180e0bc32fde}} 
\index{unit\_test.cpp@{unit\_test.cpp}!test\_iteration@{test\_iteration}}
\index{test\_iteration@{test\_iteration}!unit\_test.cpp@{unit\_test.cpp}}
\doxysubsubsection{\texorpdfstring{test\_iteration()}{test\_iteration()}}
{\footnotesize\ttfamily static void test\+\_\+iteration (\begin{DoxyParamCaption}\item[{int}]{test\+\_\+num,  }\item[{\mbox{\hyperlink{structexpected__eq}{expected\+\_\+eq}} $\ast$}]{ptr\+\_\+ex\+\_\+eq }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Сравнивает результат работы программы с ожидаемым результом и при несоответствии выводит ошибку 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em test\+\_\+num} & Номер теста для удобства отслеживания места ошибки \\
\hline
\mbox{\texttt{ in,out}}  & {\em ptr\+\_\+ex\+\_\+eq} & Указатель на структуру для проверки работы основной программы \\
\hline
\end{DoxyParams}


Definition at line 69 of file unit\+\_\+test.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{69                                                                 \{}
\DoxyCodeLine{70 }
\DoxyCodeLine{71     \textcolor{keywordtype}{int} root\_count = \mbox{\hyperlink{solver_8cpp_aa62ebac4c04caf72819ce699f8954186}{square\_solver}}(\&ptr\_ex\_eq-\/>\mbox{\hyperlink{structexpected__eq_a7f76d73438937c34157f649c5817aebc}{test\_eq}});}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     \textcolor{keywordflow}{if} (root\_count != ptr\_ex\_eq-\/>\mbox{\hyperlink{structexpected__eq_a499d5f3d47ec1e8e60af370c9647d791}{correct\_root\_count}} || !\mbox{\hyperlink{unit__test_8cpp_a948a7cc54fd7d17daf16879a15fb089e}{compare\_correct\_and\_test\_roots}}(ptr\_ex\_eq)) \{}
\DoxyCodeLine{74 }
\DoxyCodeLine{75         txSetConsoleAttr(4);}
\DoxyCodeLine{76         printf(\textcolor{stringliteral}{"{}Ошибка в тесте №\%d\(\backslash\)n"{}}}
\DoxyCodeLine{77                \textcolor{stringliteral}{"{}Итоговые значения:  root\_count = \%d, x1 = \%lg, x2 = \%lg\(\backslash\)n"{}}}
\DoxyCodeLine{78                \textcolor{stringliteral}{"{}Ожидаемые значения: root\_count = \%d, x1 = \%lg, x2 = \%lg\(\backslash\)n"{}}}
\DoxyCodeLine{79                \textcolor{stringliteral}{"{}\(\backslash\)n"{}},}
\DoxyCodeLine{80                 test\_num+1,}
\DoxyCodeLine{81                 root\_count,}
\DoxyCodeLine{82                 ptr\_ex\_eq-\/>\mbox{\hyperlink{structexpected__eq_a7f76d73438937c34157f649c5817aebc}{test\_eq}}.rts.x1,}
\DoxyCodeLine{83                 ptr\_ex\_eq-\/>\mbox{\hyperlink{structexpected__eq_a7f76d73438937c34157f649c5817aebc}{test\_eq}}.rts.x2,}
\DoxyCodeLine{84                 ptr\_ex\_eq-\/>\mbox{\hyperlink{structexpected__eq_a499d5f3d47ec1e8e60af370c9647d791}{correct\_root\_count}},}
\DoxyCodeLine{85                 ptr\_ex\_eq-\/>\mbox{\hyperlink{structexpected__eq_a15459797c2ccdd19d372b6f94dafd8f6}{correct\_roots}}.x1,}
\DoxyCodeLine{86                 ptr\_ex\_eq-\/>\mbox{\hyperlink{structexpected__eq_a15459797c2ccdd19d372b6f94dafd8f6}{correct\_roots}}.x2);}
\DoxyCodeLine{87         txSetConsoleAttr(15);}
\DoxyCodeLine{88     \}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{91         txSetConsoleAttr(2);}
\DoxyCodeLine{92         printf(\textcolor{stringliteral}{"{}Тест №\%d пройден успешно\(\backslash\)n"{}}, test\_num+1);}
\DoxyCodeLine{93         txSetConsoleAttr(15);}
\DoxyCodeLine{94     \}}
\DoxyCodeLine{95 \}}

\end{DoxyCode}


References compare\+\_\+correct\+\_\+and\+\_\+test\+\_\+roots(), expected\+\_\+eq\+::correct\+\_\+root\+\_\+count, expected\+\_\+eq\+::correct\+\_\+roots, square\+\_\+solver(), and expected\+\_\+eq\+::test\+\_\+eq.



Referenced by unit\+\_\+test\+\_\+start().

\mbox{\Hypertarget{unit__test_8cpp_ace1c481b39dab262c935d9a6e9855203}\label{unit__test_8cpp_ace1c481b39dab262c935d9a6e9855203}} 
\index{unit\_test.cpp@{unit\_test.cpp}!unit\_test\_start@{unit\_test\_start}}
\index{unit\_test\_start@{unit\_test\_start}!unit\_test.cpp@{unit\_test.cpp}}
\doxysubsubsection{\texorpdfstring{unit\_test\_start()}{unit\_test\_start()}}
{\footnotesize\ttfamily void unit\+\_\+test\+\_\+start (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Запускает модуль тестирования 



Definition at line 31 of file unit\+\_\+test.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{31                            \{}
\DoxyCodeLine{32 }
\DoxyCodeLine{33     FILE* ptr\_to\_file = fopen(\textcolor{stringliteral}{"{}data/answers.txt"{}}, \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{34 }
\DoxyCodeLine{35     \textcolor{keywordflow}{if} (ptr\_to\_file == NULL) \{}
\DoxyCodeLine{36 }
\DoxyCodeLine{37             perror (\textcolor{stringliteral}{"{}Cannot open answers.txt"{}});}
\DoxyCodeLine{38             \textcolor{keywordflow}{return};}
\DoxyCodeLine{39 }
\DoxyCodeLine{40     \}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42     \textcolor{keywordtype}{int} line\_count = 0, test\_num = 0;}
\DoxyCodeLine{43     \mbox{\hyperlink{structexpected__eq}{expected\_eq}} ex\_eq = \{\};}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     fscanf(ptr\_to\_file, \textcolor{stringliteral}{"{}\%i"{}}, \&line\_count);}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \textcolor{keywordflow}{for} (; line\_count > 0; line\_count-\/-\/) \{}
\DoxyCodeLine{48         fscanf(ptr\_to\_file, \textcolor{stringliteral}{"{}\%lf \%lf \%lf \%lf \%lf \%i\(\backslash\)n"{}}, \&ex\_eq.\mbox{\hyperlink{structexpected__eq_a7f76d73438937c34157f649c5817aebc}{test\_eq}}.cfs.first,}
\DoxyCodeLine{49                                                         \&ex\_eq.\mbox{\hyperlink{structexpected__eq_a7f76d73438937c34157f649c5817aebc}{test\_eq}}.cfs.second,}
\DoxyCodeLine{50                                                         \&ex\_eq.\mbox{\hyperlink{structexpected__eq_a7f76d73438937c34157f649c5817aebc}{test\_eq}}.cfs.third,}
\DoxyCodeLine{51                                                         \&ex\_eq.\mbox{\hyperlink{structexpected__eq_a15459797c2ccdd19d372b6f94dafd8f6}{correct\_roots}}.x1,}
\DoxyCodeLine{52                                                         \&ex\_eq.\mbox{\hyperlink{structexpected__eq_a15459797c2ccdd19d372b6f94dafd8f6}{correct\_roots}}.x2,}
\DoxyCodeLine{53                                                         \&ex\_eq.\mbox{\hyperlink{structexpected__eq_a499d5f3d47ec1e8e60af370c9647d791}{correct\_root\_count}});}
\DoxyCodeLine{54 }
\DoxyCodeLine{55         \mbox{\hyperlink{unit__test_8cpp_a19e8d21242de8be1599a2bcd44e4fbd5}{change\_root\_to\_zero}}(\&ex\_eq);}
\DoxyCodeLine{56 }
\DoxyCodeLine{57         \mbox{\hyperlink{unit__test_8cpp_ad8838576751520ee44f3180e0bc32fde}{test\_iteration}}(test\_num, \&ex\_eq);}
\DoxyCodeLine{58         test\_num++;}
\DoxyCodeLine{59     \}}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     fclose (ptr\_to\_file);}
\DoxyCodeLine{62 \}}

\end{DoxyCode}


References change\+\_\+root\+\_\+to\+\_\+zero(), expected\+\_\+eq\+::correct\+\_\+root\+\_\+count, expected\+\_\+eq\+::correct\+\_\+roots, expected\+\_\+eq\+::test\+\_\+eq, and test\+\_\+iteration().



Referenced by main().

